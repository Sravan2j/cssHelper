<!DOCTYPE html>
<html>
<head>
  <title>cssHelper</title>
  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
  <link href="prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="prettify.js"></script>
  <link rel="stylesheet" href="cssHelper.css">
  <link href='http://fonts.googleapis.com/css?family=Kite+One|Libre+Baskerville|Bigelow+Rules|Devonshire|Allerta|Voltaire|Bubbler+One|Roboto+Slab|Stint+Ultra+Expanded|Autour+One' rel='stylesheet' type='text/css'>
  <script>
    var fonts = ['Kite One', 'Libre Baskerville', 'Bigelow Rules', 'Devonshire', 'Allerta', 'Voltaire', 'Bubbler One', 'Roboto Slab', 'Stint Ultra Expanded', 'Autour One'];

    function fluid( element, sliderElement, attribute, maxVal, defaultSize, regex, innerText, magnitude) {
      $(function() {
        //$('#'+sliderElement).css("background", "rgb(0, 0, 0)");
          $( "<p class='sliders'>"+innerText+"</p><div id='"+sliderElement+"' class='sliders' ></div>"+"<br />" ).insertAfter(element);
        $('#'+sliderElement).slider({ value: defaultSize });
        $('#'+sliderElement).on( "slide", function( event, ui) {
          var sliderVal = $('#'+sliderElement).slider("option", "value");
          var regexArray = regex.split("_");
          var prefix = "", suffix = "";

          if (regex[0] == "_") {
            suffix = regexArray[1];
          } else if (regexArray.length == 1) {
            prefix = regexArray("_")[1];
          } else if (regexArray.length > 1) {
            suffix = regexArray[1], prefix = regexArray[0];
          }

          var attrVal = prefix + maxVal * ((sliderVal*magnitude)/100);
          if (attrVal[0] == "#") {
            var num = attrVal.split("#")[1];
            var val = Math.ceil(num * (255 / 100));
            var rawColor = $(element).css(attribute).split("(")[1].split(")")[0];
            //console.log(rawColor);
            var colorArray = rawColor.split(",");
            //console.log(colorArray);
            var r = colorArray[0], g = colorArray[1], b = colorArray[2];
            if (suffix == "r") {
              r = val;
              $('#'+sliderElement).css("background", "rgb(" + val + ", 0, 0)");
            } else if (suffix == "g") {
              g = val;
              $('#'+sliderElement).css("background", "rgb(0, " + val + ", 0)");
            } else { // b
              b = val;
              $('#'+sliderElement).css("background", "rgb(0, 0, " + val + ")");
            }
            attrVal = "rgb(" + r + ", " + g + ", " + b + ")";
            
          } else if (attrVal[0] == ".") {
              attrVal = attrVal.split(".")[1] / 100;
          } else if (attrVal.substring(0,2) == "ff") {
              attrVal = fonts[parseInt(attrVal.substring(2)) / 10];
          } else {
           attrVal += suffix;
          }
          $(element).css(attribute, attrVal);
          //console.log(attrVal);
        });
      });
    }

    function getCSS (doms) {
      if (typeof doms == "string") {
        doms = [doms]
      }
      var cssString = "";
      for (var i = 0; i < doms.length; i++) {
        if (doms[i]) {
          cssString += "#" + doms[i] + ' { ' + document.getElementById(doms[i]).style.cssText + ' } \n';
        }
      }
      document.getElementById('genCSS').innerHTML = cssString;
      //document.getElementById('mytext').createTextRange().execCommand("Copy");
    }

    /*fluid("#hi", "opacity_slider", "opacity", 100, 100, "._", "Alpha", 1);
    fluid("#hi", "color_slider_red", "color", 100, 0, "#_r", "Red", 1); //fourth
    fluid("#hi", "color_slider_blue", "color", 100, 0, "#_g", "Green", 1); //third
    fluid("#hi", "color_slider_green", "color", 100, 0, "#_b", "Blue", 1); //second
    fluid("#hi", "font_slider", "font-size", 100, 50, "_px", "Font-Size", 1); //first
    fluid("#hi", "font_family_slider", "font-family", 100, 0, "ff_", "Font", 1);
    fluid("body", "redness_of_background", "background", 100, 0, "#_r", "Redness", 1);
    fluid("body", "greenness_of_background", "background", 100, 0, "#_g", "Greenness", 1);
    fluid("body", "blueness_of_background", "background", 100, 0, "#_b", "Blueness", 1);
    fluid("thing", "color_slider1_red", "background", 100, 0, "#_r", "Red"); //fourth
    fluid("thing", "color_slider1_blue", "background", 100, 0, "#_g", "Blue"); //third
    fluid("thing", "color_slider1_green", "background", 100, 0, "#_b", "Green"); //second
    fluid("thing", "width_slider", "width", 100, 50, "_%", "Width");
    fluid("thing", "height_slider", "height", 100, 50, "_%", "Height");*/

    fluid("#mytitle", "text_mover", "margin-left", 100, 80, "_px", "Margin", 5);
    fluid("#mytitle", "opacity_slider", "opacity", 100, 100, "._", "Alpha", 1);
    fluid("#mytitle", "color_slider_red", "color", 100, 0, "#_r", "Red", 1); //fourth
    fluid("#mytitle", "color_slider_blue", "color", 100, 0, "#_g", "Green", 1); //third
    fluid("#mytitle", "color_slider_green", "color", 100, 0, "#_b", "Blue", 1); //second
    fluid("#mytitle", "font_slider", "font-size", 100, 50, "_px", "Font-Size", 1); //first
    fluid("#mytitle", "font_family_slider", "font-family", 100, 0, "ff_", "Font", 1);
    
    $('.button li').on('click', function(evt) {
    });

  </script>
</head>

<body id="mybody">
  <div id="container">
    <input type="text" name="name" class="sliders" id="mytitle" value="Hello World" maxlength="25" autocomplete="off">
    <!-- <h1 id="hi" class='sliders'>Hello There!</h1> -->
  </div>
  <br />

  <br />
  <br />
  <p class='sliders' style="text-align: center;">Separate DOMs by commas, and reference by id!</p>
  <textarea id="mytext" class='sliders'></textarea>
  <br />
  <ul><li class = "button" >Generate CSS</li></ul>
  <code id="genCSS"></code>
  <!--<input class='sliders' type="button" value="Generate CSS" onclick="getCSS(document.getElementById('mytext').value.split(', '));"/>-->
</body>
</html>
